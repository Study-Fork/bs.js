<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>bs.validate</title>
<script src="http://js.bsapi.co/3/build/test.php"></script>
</head>

<body>

<h3>validate</h3>
<div id="login">
	<div data-group="form" data-prefix="login">
		<div>
			<label data-s="html,{^@form.0.label^}"></label>
			<input type="text" data-vali="id,?range:msg0(6,20)" maxlength="20" value="" />
		</div>
		<div>
			<label data-s="html,{^@form.1.label^}"></label>
			<input type="password" data-vali="pw,?range:msg1(6,20)&alphanum:msg2" maxlength="20" value="" />
		</div>
		<button data-s="html,{^common.btn.send^}" data-up="send"></button>
	</div>
</div>
<hr>



</body>
<script>
(function(){
bs.msg(
	'msg0', function(v){ return '아이디는 6~20자 이내여야합니다.'; },
	'msg1', function(v){ return '비밀번호는 6~20자 이내여야합니다.'; },
	'msg2', function(v){ return '비밀번호는 영문 소문자, 숫자만 입력가능합니다.'; }
);
bs.rule('pw', function(v, a){
	var r = /[^a-zA-Z0-9]/g;
	if(r.test(v)) return false;
	return v;
});
bs(
	'login', {
		form:[{label:'아이디'}, {label:'비밀번호'}],
		send:function(e){
			var t0, t1 = '';
			t0 = bs.validate(bs.getId('login'), 'form');
			if(t0.ok){
				alert('서버에 전송');	
			}else{
				for(k in t0.result) t1 += t0.result[k].msg + '\n';
				alert(t1);	
			}
		}
	},
	'common.btn.send', '전송' 
);
bs.render(bs.getId('login'));
bs.on('up');
})();
</script>
</html>
